import { ethers } from "hardhat";
import { Signer, BigNumber } from "ethers";
import chai from "chai";
import { ClientManager, Tendermint } from '../typechain';


let client = require("./proto/compiled.js");
const { expect } = chai;

describe('Client', () => {
    let accounts: Signer[]
    let tendermint: Tendermint
    let clientManager: ClientManager
    const chainName = "irishub"

    before('deploy Tendermint', async () => {
        await deployContract();

        // create light client
        let clientState = {
            chainId: "chain-f6C1TF",
            trustLevel: {
                numerator: 1,
                denominator: 3
            },
            trustingPeriod: 10 * 24 * 60 * 60,
            unbondingPeriod: 1814400,
            maxClockDrift: 10,
            latestHeight: {
                revisionNumber: 0,
                revisionHeight: 3893
            },
            merklePrefix: {
                key_prefix: Buffer.from("74696263", "hex"),
            },
            timeDelay: 10,
        };

        let consensusState = {
            timestamp: {
                secs: 1631155726,
                nanos: 5829,
            },
            root: Buffer.from("gd17k2js3LzwChS4khcRYMwVFWMPQX4TfJ9wG3MP4gs=", "base64"),
            nextValidatorsHash: Buffer.from("B1fwvGc/jfJtYdPnS7YYGsnfiMCaEQDG+t4mRgS0xHg=", "base64")
        }
        await createClient(chainName, tendermint.address, clientState, consensusState)

        let irishubClient = await clientManager.clients(chainName)
        expect(irishubClient).to.eq(tendermint.address)

        let latestHeight = await clientManager.getLatestHeight(chainName)
        expect(latestHeight[0].toNumber()).to.eq(clientState.latestHeight.revisionNumber)
        expect(latestHeight[1].toNumber()).to.eq(clientState.latestHeight.revisionHeight)

        let expClientState = (await tendermint.clientState())
        expect(expClientState.chain_id).to.eq(clientState.chainId)

        let expConsensusState = (await tendermint.consensusStates(clientState.latestHeight.revisionHeight))
        expect(expConsensusState.root.slice(2)).to.eq(consensusState.root.toString("hex"))
        expect(expConsensusState.next_validators_hash.slice(2)).to.eq(consensusState.nextValidatorsHash.toString("hex"))

        let signer = await accounts[0].getAddress();
        let ret1 = await clientManager.registerRelayer(chainName, signer)
        expect(ret1.blockNumber).to.greaterThan(0);
    })

    it("test updateClient", async function () {
        let headerBz = Buffer.from("0a81630a91030a02080b1209697269736875622d3118bbf6cd05220b08b4e8868a0610b9c1d4212a480a202a38aa94b270e85f8f6dedefd492e249eb4187e7ee23c45bf5c7c29cc8798381122408011220b69b2c8bfeddcbf445b6914422dbc968a29ba59c13b6965e32129ad6086170143220d4d253e489549bc35eb00c12640c25a9a79c6d323f852f5834feecd1dcc6ed4c3a20e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b8554220b44fed270eaae417639b529fe463e2ef669ce285e7548d828f1d1967da13a7d54a20b44fed270eaae417639b529fe463e2ef669ce285e7548d828f1d1967da13a7d55220614e3fdce077a12dc945c5dd8c7c14c777e56ab66c7f44ef1595f121c89437595a203287e56e727ac842ba0cc1190e82cfac1a99b4009168de018b16035fc59ed5856220e3c8e16f9b05717457f3a8a0fa52e6d71a673e663b6c73fe627a3fd8f5cf2d5f6a20e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b8557214e03eff2582c25675b17c0c34f92bd60b977578ec12ea5f08bbf6cd051a480a205af2b2b9204944c8c3f817f191a2a5528dc1962edc638729a8f04862b2403e50122408011220ae45d84d6400d6ceb65379f2d2f75988f41ba840da88ceef0c043dfc3d266eb02268080212143287c60f1b7ed6f8eec191666c13011ef7b529571a0c08fde8868a0610e6d2ccaa01224091b3dd9ff4976e08a836c21b7f1bacc36962250c9d16b967a3d3af3527d300470991c08d1484a639c94de1d0199cf22f1fa90808cb4a22fbbf7ce653a4a5ab00226808021214c563eecb2f99e06a902c920a867d8959cef1ae9b1a0c08bae8868a0610cbe3fda3022240740e83b593a71a56b901942a8513d3e2422e66c682c417cd83e13c5e2deeadb7feee53436f0be19492e20a9831d1acad7786a3836126646e1094f6b5f4f979082268080212148a1ea7775fb5d40d69fa0e6eef1372ace2ff77471a0c08bae8868a0610c6b0ad83022240952e5781cda73897536be5d708de8a2f71398c51531437227f274b51305904febced476dd3407179f3a321e685e3e58cfd0ebe92c188b547d06dc594ebd323012268080212140af650951dce5d8fb2d6103bc85d17cb16f5a08c1a0c08bae8868a0610e1c5bca40222404317a66b21647846ce9281db8c0447985cf210f660907b16b7d9e0fe77ce0eb56281e0cda1616324f079f3ab5d7a39fee75d19aab01d569b947b5ed5f4553f0d226808021214ba355b5d42c2ff6fb34d9d0be5955dd7f44c7bcc1a0c08bae8868a0610b7a2e7a702224073e752aacd09cbff9b8c8d768f65cf4e6ae13c05079a746ce487d6e3c966f97982aa2e85cae2c94bdbb3105a71fa98e29772c7d7091317327eee7fa852051a0822680802121451244da65098e41b63fc0911647d8db055cb72781a0c08bae8868a06109489c3ff012240b6e731d831c61e9b19ac2c8d577fa2e6c3b4ce829166242ea5a8e5c718b35b97745c695e1ab18f7a2a42271559a1eed3b151cfca54c4615d7c4b3674c005660d2268080212141d55d18575f55f0986f7e04156252cda1c8c6b7c1a0c08bae8868a061080abebbc022240ab2c19c0ce2b25c9d848c204da16d2f0e92153b83c45760a38cd9c08121766b5c312beaacd19f9cb62e72355f58e35071324175aedfb004b497064e2edfc6c06226808021214d1d363c627fb609a10906b9752a6410475d186f71a0c08bae8868a0610f989dd830222400cc5b798667aefc86b248adb0c44a8f90519b30193126f80d84e983721677d1e6e535cf73c55ebf0dd09b75d0d6015198a486040338e6e694045c9b320ed1c0a2268080212148737b9e89bb479057e8f0273bc76033d595aacb81a0c08bae8868a061091c7e79c022240e73e46cd8bb8c69575eca78548a64dc35249b629dfbf600f4e3850967dab44776fa03e60f16c2ae7fe921af3800608fed09d5e872848a3a2307a9e9440443a052268080212146bf55b20424140b3e2c084c1d946ade4b8d68ccf1a0c08bae8868a0610f69cbb930222401fb1e3e42d0f573219f1bae03f598ccb0fc285fc49e5a59a7122ae9cc845f8c0feba62b37996e27367e65bd590562400f178521c8a79d0396ed9589f9b2e9908226808021214a2c16a6bdf929b718cb89894ad4342d16ff0f1051a0c08bae8868a0610d8d2a2e7012240504f7f16a0d277b1145decc1fc38fbd56676e5e71bacb4264a49e27bc58dab58271e7f53d7028c3876fbeef5d4a4b822d2c0689e1ec27ed8efa2fd2679cf9508226808021214ee39100e08c79f5e43abe47b16b0eea83f380a431a0c08bae8868a06109094a5a6022240a2c5af412dbe3864575e993e72fabe1ec5eae43fe9f2407a2ba7e69fa4232dccbafd5c527c85b17b225bd423ccffef05f1a84b164d236299ea29c072907607092268080212147091c7c0c62cea73f2f7addff555958f7f154ae01a0c08bae8868a0610db83afb802224061df21823e6a4b0a21b574d03b537daf6ba2b1d881d7a8cfaf9e3e7d87e13e02a7bd1df3a702bc06199d91c235a2f2a339486dda99823da76956fba78b67760f226808021214afcfcbabdda5ff7d1b7984affef298cc07e2826a1a0c08bae8868a061085dfe4b20222409586690f5db07a32ac4ac1e2ee83729a4692c4ae65682c133320150f07e850d67259df9c68298f314aa20b18a546a99cf0f742095a19784aabf4a97bdf30a309226808021214ecc746d2d4e52a55c2b1bd9ca46ecd35fa92e5021a0c08bae8868a0610f3fbc6fe012240a9f99e5180e5eac5ed49cfa26f14d112a8aa7cc19bd41686b82d004271218cb7f8066ef3351a9b8f6f06f282e44339ee5b28284af75e1146ac6021db82a08307226808021214e03eff2582c25675b17c0c34f92bd60b977578ec1a0c08bae8868a0610b5a0d2a20222403ea46dac9f5c67486a4c9a6417df32bedb987169f5c58fb1aec6a045ba20dc9be331b5df8ed0a99a07f4ab874a51df4d82733b96880cc3c5b93f9394782156022268080212145d190f3fc8ac5074bc87869d0e62da8ef51ddf431a0c08bae8868a0610e884f38e0222404ef8274585ab31091dbdc2f75a2e6ebe07f02e3ce789ecf240943465ffc73d403506e65ee390c9b6fad48d30463a66a33ca38f668cab2087b849d4691f38b00a226808021214bd43cb6dc9702d21bf67173d435db61b43aea0111a0c08bae8868a0610e0e7c8a30222407cb6d5b81f3df0ccf6cc7bfd2d858d0d619531d3f67cec0f2fe0d81e7a0c2baefb4fa3f9c71423ac82a5eb07ed69bc0d3385f1bd8b3a57bb87040c0d9357df01226808021214a7d608294899506685dd9a296163b9667893645a1a0c08bae8868a06109595e88f022240033174e94899921d1310bb8716e72b3746afe4b494ea1500fbb469ea9799b25adb1efbdc20775a9c6b7447da8742953a3354a41834a2dd815c66454bca53740d226808021214d26a22f6d7c783469e712fb3d02dce9c78bea35e1a0c08bae8868a06109f89e0c002224059ec1c9abba780d47e94f68f22bb3c32de21bc5f3ef4ca03d6dd61476ed3307b4424a189baeeb681a353ec12f0d6f8f4acae883b43ad4e23580f17e2bcf744002268080212148e965610e83afaac3046f841f9f812c1642db5a31a0c08bae8868a0610afeefb8b03224039e7b72c24362cfbbeda93534db98967b1e121c51a8cefd89c0ab82c71483d7a6e68db5430e6159f02c56a017b371d545efcdab8420ef1f8c61785121d3cd902226808021214e4901ada13bb8aa41d9f106a78daa8a64da7e7171a0c08bae8868a0610a5fed98d022240d3257ad29cd453dc9048e3545b9fa7c7ad12f3d462e0762bb9b45c7969f3388e9b22547ee771668c7a5dc5f9a426106830fcd0c576b2d7e9cf56a1c6724aee05226808021214e5beeb58cb492e9a7d1da3e0ddf5570029919b941a0c08bae8868a0610e787d59a02224066257b859d21990d47e1d0c8aff16357dc66aa3ddfba84918843ae5b5ee2ce979ef491d488bba1cdacf64c5cb228950d3a0edb8c6ee55c9ccd5584853a4077022268080212142e5bec3f64fff5d723c05dabf8f1acb16797aac71a0c08bae8868a0610a3d5e8c70222409549a714cb7104d3a4656f2c791ced956cc1c9be8c03b8e83b37d19bffaadc4f572bd4281fb0b4c4c8e68cb4879df27d5823d94979e5e4ddb945b258f959f503226808021214edc6cbc22b2af2b986cd1b1d0ac9869ff41a1b881a0c08bae8868a0610cff7f88e022240db13bc3be1c29b5ebfbeb3e76f1c0a7bfaad307bd1ab0868d0fa7bcf2964e48b0518a82f5343cc9369075a14334d055d8f08a2e77a0432b0b18a4f7aecdf850b226808021214b968ea08e44cf1011600a4fb3a81329430bcdf591a0c08bae8868a06109edcb19b032240c0faa78022f49e443eacffe81feed2396bb58d95723a4c356345489e93bc0e340db0f37aa2160684f4484b570042f426ec34c85cd634a189411f203755fd7f0e22680802121436d26fe5751580bb25a65d7cb8847e340bd03d891a0c08bae8868a0610aa97aad0032240b9dd2f7d5578cbc92285971abe6c84e974b09425e48953237de5b267cfb3cacb89a65c882b23cd84b4b09345fae930357c65552135278aa09428c6372ba4370322680802121428f96fad36ec682cead12b11b90ea601466415331a0c08bae8868a06108d87bed702224031e1e47ed7c34746ec9fbf9256c8eadf7bac0916d5ec47d0ce678ca4c1c9db413f187acb22d9f87851ea209c7bbbadd5acd4f0cc7220e1856c21bfc09247d10e226808021214826f215cf31e57c47c078d95ea7fb502dd937e491a0c08bae8868a0610b7d9cec6022240e113103839a648ed733c98824e8118ffb926a37fd69dbda22c4f177eaf1d2a151bd9909236ae3491e3d8f6dd785209069f92900fd5b67c18f537ab8c053cb702226708021214e699cbfbb362d333f0d300bead5b6a87fa85a5f41a0b08b5e8868a0610b9c1d42122400096c1311a43c7747ca27c85f9be17afb0b3d57d9f30901b16f7ed201fc5ddff35bd87505a9cf898e9c08029276e33f28f6c08c630bda321ff498693d46c7906226808021214530f63978af375fc32c661741c4f9004bfc0c25c1a0c08bae8868a0610d4d1afd902224055f7ea69843810858045f95864d5eedb0a3afa7f1b68710893ee0d1f37d7909925d4f57ab3a9757120eeb9326d5e9cdff5ed9048fed0606b7ebbc3d1ff6fac022268080212147a148309c6260b62e09df7bb95fc0755bef8802d1a0c08bae8868a061095a4969e0222400a81bdaa726716c6545addc4d34a9530fb6738ce7069eea25951c4634dcff92e410d7b92ce7150cc4b85b5de8f459b00f4440039a0992062b22d3f7a6f918803226808021214d13f968c8091290728c4e65acd844f104738e6a71a0c08bae8868a0610a9d8f5ab022240042d313769ff349b0fcd15565a4dd76caf8a6fcaf8ad259295d825cecd4faa1402c7fd551bce45af6308dfaf29d99e8c49e5401ba5eaead970b0b31c86342603226808021214bd428d1857d47f31d195709cb98eb93c54c00f241a0c08bae8868a0610d4a2e49e022240b663598cfaffe02a2ad26ba345874b4ac678e99ad4fa9bdfeeb30d68d585618e5daee30020c85a1825a7f78f2cb11898fcd9e470951c4652df8a1bf6ac0f970d226808021214268b6118f2511ea962c09d838ea5f1930f7568951a0c08bae8868a0610d796c8da0122402f6378eba9b371e5111a3858273e0812ed8b18bea4a9a70199697ad2475dd157dcbe4a457d90d70b5e20aa4a3f05f2329d14f17dcb8f8bbe4a4db04e78ad7d012268080212141c12ef53664f2325aee5fe1fcf8f82c997a325221a0c08bae8868a0610c2868eff0122406727c3427e55c2f24026080fde88f05b0d14e5eec8a5354ddb7aaa4a0a1f13263495d1166438efa59a0ed15a9596c4d845d207c1079dd9d8bb60f344724d53012268080212143a1ed21f45ec0f5983b55fb4d92c3adaab51387d1a0c08bae8868a0610a6b195c7012240fba45557143b8b1424324c141914e7d4aeb9531746066f99bba857382e837889cf58ce095d89c144e8f581e658be049a217466d11f93f47b4a73f54286f44f0e226808021214626b9ecbf93624a70e6253a6b689d8f56aca70891a0c08bae8868a0610c088dfa1022240d838697456f05a374784c9ab4611673d71fc7a30476f73cb0b5c386d6644f9075604e4f5d13307c8851c159eb89523057fbcdaa561d9040368d00ff23abe9805226808021214280238a00a2aacab87f9d9cc49273f14413b71281a0c08bae8868a0610fbbae09b022240dbfd9ee0ac2cb176ad6520f43c53d958a07aa582860a72af39f0f351ea941e6f9b1fcdd7806da8b09ebdc44f76b380b916124c0a307fa56ef4bbd6b336504f0a22680802121459d1994010cfc35f1edc7e5addeec3b601d6f0661a0c08bae8868a0610fbb9dad70222401ea7c61564ce5c98274555de9489e035c2aec674de8c6c57611a8d62a578d9de3047c32014a513f0a25fc83cef585e69c067fc24ffc90ffec460a59775535508226808021214fe3615067070fdd4eada02fcaf5c3f6ea78b77501a0c08bae8868a0610c8fbb899022240d2b8d47414d069992991ece443c1a2cab83315944971a32158b0c66b3f20db4285e66fa631387b0662e8824e66c26bc073234968cbfd8ceee1546eee7a01ef0d2268080212142ed887a3a0ff4bf839fe79cbf6e0df46e5f4b2ef1a0c08bae8868a06108ecb928e0322405d11df460ba81c0bb3b642b4a91aafe7e8df45b5361d25148adfe6280bd76eea61dd50d9f5c8e610ce7f8fefb895fe9dbaf2611fb693b0020fb57668518c040f2268080212140dc77a2f85f547aaaae904fc83167449ce58163f1a0c08bae8868a0610cbc389e102224019eabadefe5ac2714c494c93f6db2b7cdc8a9185663649640158fc4ef65cdbc3a8a929745c3a59762df00ed3f2cf7933876b81d0d31acfb574b9da87264589072268080212144d0d22ba3a93532196e8770db08f1f8e8f66cdc01a0c08bae8868a0610fea0c497022240e1c4bcda6a36b0c214a033d272bd3b247e5b72600957ec04cf1ccdcf97a4ee231e147c38c3a02d064926889583c49fb3e7eba98b24c39a314cbc8ee6cbd8f4012268080212140def792d5fc192d275d97b9ca11feb9751e694161a0c08bae8868a0610fe9ba18b0222405a005c10d0703f8d7ef67247a6aadabcc86741d542900d5b13fc980f30d948a845e30f27c0dcde1db94eaace18d8bfd312000388a90ff07ff489063dcae5800f2268080212145369a14645a90540434709a757a251cdd36315b01a0c08bae8868a0610d3f0c9ba0222403841041eb3493c85a2e73a612c63e3a44bedf1325c3408b6c85e26f050fe34409b81cb85c5baa14d8bdb6fc45bd748eb4248b3519be814240616d94439d23501226808021214dc67f8412bc62f6234d0cc5b466aca6cb122bb0a1a0c08bae8868a0610aec6e1cc022240e45109d9de7cd3bed8a8401c2778a243d311abc784a291db7f4b02fe3e234cd57f498243a79285b822c6c5dfa81777a5ee70038d4ae50eb1b8a63a12445a5a052268080212146cc8b8c51b73cd536a18febb61edb794dbc794d21a0c08bae8868a0610effdd0db02224064565b4ff0bb3bf44dffaa347d08c42ca9fb98349a8bb27eacea7993c0d0a6b933004b06148b7c54201532a0003695da9f446b010ede8088bde852fc2a77ce0d226808021214a0ba11f972b089ce49ef5ddf7792acabf5a782181a0c08bae8868a0610f1b5fef9012240f16d455bd500f9c353b7248d5ee15e14ae65b7dc75fb368972e62ac30fbb3c6abe0bb85f3c449693f6dee37b1ec8111b4b93b3df1b16687d874b11a8be26960f226808021214b3b6c16c858bc8b68d9ae8889fe74880409de2f71a0c08bae8868a0610afe8988d02224038977c847c37247f505f2b8c05c5d6100c584e62476f66c6781fe98af3267ea04eac8834a1bf97092d9c9644c54063d49bbdb9505956c5e7063f223699b2fa06226808021214d442d6b61308ba78d1c98ed2658e2208485d03011a0c08bae8868a06108f9fd9bc022240692fabc464615a7cb605f69be2940f59786316cb17e75cedce7aaeb0b118cb18bd595a3cc40d1413da7283c438b0d7ba6c9da01881ccb08bf5990133c01f160122680802121424ad3f41631abb1d39d41f06e7c4d048fe502df51a0c08bae8868a0610f5eabfc9022240e02c9e72e72f6b02bf7a1908fb331b6149b94fe13cb2ab9999bc8259bb9e6c872291c3ecb1cc3905e674dc943fe6095cf02d96221c1a8102daebe7076b4b5a0e2268080212142551e515ad20757361fc04e534e27254172e98971a0c08bae8868a0610b8a5afcc0222406d582f2ff4d286c2e4d937f26ab6aa8958c6b645d8427c3161bd739b2d41ae4ab448ee88308cd3974791a55efaa636ab5d096ae56f86401378507c926f55820c226808021214351f25fbbdf46766cc72d98a32100960cb4f3c321a0c08bae8868a0610e4c0a599022240c42cc43f30fe8256adf5da5a5f6be3d18b44bec85b36a9695ba85a2d4b73b113bf26a915aa908f1a6b382e543616a7d69af56f00a9e244ef6347b2576e0eb408226808021214f8659d35965552c22cf633f4d044ddcbb1f6d33f1a0c08bae8868a0610b4acec9b022240490c91e25f489c9b0782784ec66696cd4a022c2e731ecaa20bbfab3c6e9221ba27d1bbfafb9b8aff934cd2a8fc066b457e45ddc0ccf62bc84a0c573e0c12320a22680802121417219176cc172860a98b14ff17db0cb334461c1d1a0c08bae8868a06109dc8c084032240e0db226b362841e4dada1b09d6285b9d6127f871e2118b2f944d5ad128848e91aa71af39fd5a60b45dbad2390de4c49c5a5b9357a8bdf6c62e102f2898b7170622680802121424ece6da95fceeb51262674e6c9e038da5f4f9cb1a0c08bae8868a061081dca6bd02224058f9d3e1beabaeefee8f7b5cdb556cb544486dd56f9f973dcfb07b9c9578beee5f724b1f4a38fa7edc9a08e55ed7af3b79cce4aff97da0c2cb5f3bfb274a580c226808021214eaa7bd48350d21f840db2b345141673fe70e37191a0c08bae8868a0610c9e1e7e8022240b172a8c78b72e3912305279aae264e21365da90de8667b407b05b3fdb11f04240cb2d24f355192054ddbad8a0f061171f754e9f12f44b2cd73a44507f5c07f0b226808021214c25d6e48f95fefacb7719bcd5d68fb1d7fa5be2f1a0c08bae8868a0610a2cbf0c102224057e50029f7ef1a433d71bc020eb681524ceae0a650d98d766e0b52f38dc3a3b5e569c25c0a7951bc5537479d2c18e857a3a7bde92f35d20102394b31cca4c403226808021214bb1fe79d049180f7e5bee8577b97199ae3468b6c1a0c08bae8868a061092ebf8ae0222401887a150cc5b6e7b487e6c5c12ad8170a0a1d4c653e48524af7448f707c1cbfea35a8322c416d78a61f020ec25cf1d51031bfe89de5831ded1938100b92ea60d2268080212141b9599a747c4b21d0038efc4f6f48670b0e8ec271a0c08bae8868a0610cba690db0222403ab29477f31a9f240e14d893bf32387dfb7d52f2b35f4f3d9a3738ddff091d129b17623331fb788ecb5f7af96524fc5effa6c49dab440758d22786d30bc7c60922680802121421673147adf7c791aed9651e16a94749458ef7431a0c08bae8868a0610f0fbefa602224037bb1cc29a5a653aec7efbd64c96fd36be4a0d44e121c00f349e82af747d2b6247d2be9fbcd4743b8fcd1df61e1a1a884cc848d22248d697e11add55c813ac0b2268080212149622196d7dbfaf1e2f08ffb8b59fe63f5f26696d1a0c08bae8868a061097bff9e5022240c6edb8038df1966885b1ecce470eec8e1c4743c7edd2606e45c25599227bde02d701f8b66cc54410ca1f4e2ba2295c31eba32e95e568cc2102fbaa2ff9513b0e226808021214e403081bc5f542f68e74118c7c9dfac84c2021421a0c08bae8868a0610d289f5f601224069a5d02b664754d0b728de6b77965d70680aaa8876a71906e8649ca7380c6027f30a2e20717b4fc16c8015b577f294eb2d42224a83b75d1278a6527f7c12e703226808021214244984de985112b84b1f353628b2cc8abe7ff40c1a0c08bae8868a0610e1f8a9fe022240ae4aa8dd65a0f80624cc33c1f512c2be14ee65e4ab7e57c2155249ed32d5d63684aaf6857a51ed7a3692b9a8817fe676f9d2f823d4e8fdf403e2c55b27987f0b226808021214d50dc3651b4ed0ed5a5907b6ab3d59c3299a404c1a0c08bae8868a0610d481ceeb0222405968430f6cf4e05cfb9776b66db5c8586bb6f466df80d92e33706dcfba5a0e74bdf5669b24fdbf8b0a3c8418a4e5aea5106bbdcb62a4c859a96ae7c69809140022680802121427d440bfc87114a5d99ccd87f54cde6bfb2dec551a0c08bae8868a0610e7be9ea002224041d57187c62c66b6da236c1945b3927a5a8ba7fdb4cc4aad9c3b6ae268b01d9f09490e0cd21ef3b763a54a1dc25d4df59b3caf042e96aed5dd23d489f2bd040b226808021214ca21fca362a90aa6c365830e8637707d809411441a0c08bae8868a0610c4f9a4d1022240f03c7ba15dddb4897c59dd3927bdeac858391c60f18dd6790e441a40f478c8890f21a397d7c1e3bec82ab93483fe6ee6872ae49a01116c592402165a314d1a032268080212143a6fc3bec611537b1317a310693c38eb0197134c1a0c08bce8868a061084afe3b60222401637b2efa3eb9b546322c74dba83486998a741ada59615bba4fc4b27dd35caec8b2e4c3dc9ab8ca4b1f3f285a7668c5fa6fc3a7bcab3754426c12848165ace07226808021214b7f332905ca5cb17912ebca23ed289c981ece7821a0c08bae8868a0610c9b385ad02224033de856f8bdccff2ae4488cbd0f18ed4be0eb7fb4114642beced53ba385cc153869782b6acf5d153581feb3193055816c72207ec0f94838143b4a1fb5fb9da052268080212141c9d420c2f6e1d5e419a2b0028b0a2f8c769c93d1a0c08bae8868a0610fcd980d3022240abcb6fc3234aa89a1df59cce656a109dbed0e5241c296048e2aafae6973b424366c7ea1dd779a4d74adef4eec1074777bd76acd89ef12f09fbd2d281810d2209226808021214f833c4d881f6dee83344f405474ebfca228edd771a0c08bae8868a0610b7c99c990222409be1c427c3f5b01b9ec8e3736194edda45de68acf08fa719eeecff409f4f47c580e912be55302f9d5cd2374adc7960aaa318c1415ee9dd8e08f59488c50f5f04226808021214214f4bbee96b7c0325168d7a862235b477924d7b1a0c08bae8868a061082ac99f50122404be2a4c930256275a31ff9c047cebeda69c29495518f8a4b2b3046bffd9e79aff46da6503014fe68d96a29dcb8242c0f4700cd9cb6adecb6266078eba36de003226808021214f35c04b93a8a6969355e5da4b968966276fe283a1a0c08bae8868a0610c0cbb3e80222408d4bab5ebce48aa61e70237ccb3dd8acb7508a7e3c1ba02d2ba482a9b9290f60c17228d2ad6eede77c9782fc4d8d27f1fe4b3832dbf5ff4d754c72b5a7ae3306226808021214dca8cc207ab8d2195a3ef43f48a8f120a3ea7b341a0c08bae8868a06108a9fdaf3022240226cf8cfece94ee9debe751b0a16de19b38207c1aaa55651d4a29b78346874b8c8bf5d2b647c2d1b7dfa2fd1851d4faa15839758ea0cf994ffef087190936a0322670802121470cdcd7bdf809b142301502fc9ecf1bf185cea6f1a0b08bbe8868a0610e1c3b72922403744314f927255bb44f8fb5140cc16d00764c53727aa3e5e7389cfd77aea5cdaa6e4596394f7da2c56fe8b92d2dec6dcf4fb4f0104d41efca915bbb61ba3b004226808021214d4bf496fb1d6cbfbff5bea9b7ccce16ebb298cce1a0c08bae8868a0610bbb4e99c022240733c45a49b1f2b0caeb5253ee0318e369840e4d402cb5f1ad3db0489d2e1bba59a386b1738a6ee4bfbab25df7b15f4ea2e7a7c2712fb9b70d36e7dfb8f15e002226808021214e9116193daf279653bfd50820e6781c1ada3a2281a0c08bae8868a0610f49194fe0122408d74d2c3b768e17c20754e246e736e6039ac02d0fa19beeafe928e63a8f9ba03f98fd6eae2f5107050745f46a5520bd9b3e21b5e60ba3c6a3503422b0650c70a226808021214f90b1e87440b1cb5e7f54ac030735737f0eaafcb1a0c08bae8868a061096e4a7bc022240e9359795d11b33edad2530c5832319141d80a3f17e8065a8345c06a6cc6a52ac75249032370974fcfdbd2acf4bf1a62dd59307a64b3102f36be22df700845804226808021214ff37aad58109084bb0d93d7979f647175975fa6b1a0c08bae8868a0610fffaa4da02224069468d65424af3f4c98012d9bb62e87441b0c391634038b0a81cb365d32476333c7e5dc8c56acc879aaa602f21183a4c0841ae9dfe095a0cc0ba56e7f6a38b04226808021214e3b4a0b904f2e1ed2eaa1ca92797711f8d48bbfd1a0c08bae8868a06109095f9f1022240106e95fcfe3321a174dc30b2c5374282c8a0680c4177650a731022082b27e773c149e2a8152a59477312ffd6eeaa57c57344d833f4d12b8ec65d595e8adeb3042268080312143c12c8a3531fca2dc9fd489906546cd5ac374bc81a0c08bce8868a0610b2a9e588032240adba5f02109f12179372b270e44c52ac80ee40225c1f3613a80c64aa4039766d12050e93b98e20a8c2cff87e4ae62e05749ddc333155d535ba965343a602ef0e22680802121414a7199cd7ff5e0c0b084086526a4209f365fbbe1a0c08bae8868a0610a5c4f9970222401d0cd563c6415e06eab50cefc804b8a41e81f0c21436b0ef4b9d8538534bf94614af34f5bf4ac2d29ee5fd54f9cbb099f47950f5544bb1d00e3a12d95a9ff00c226808021214c918492498ac6cd208bba005822988b7e1bfe6031a0c08bae8868a06108eaaa58b0222406421bcf3d77d1e10e5f1af2f7f5bea3611d0263c47103a87e8daef8cf3a2f16b0f16db62fe5e013453e7264cd5884dffca479f97c1a3dbf22e2a2261305a100622680802121470fc1e29679a08f66f829a4b85ddf9e8b1cffd291a0c08bae8868a06109d8f89ab022240eace4a391026f6f02db9be2861e60a2b75bef7e0f1fbe9bc0903dd8588e28bf00e2e3c9888b70a73aa1f54147036e3eb1617e9b9b3a8fcab08ad8e61e35d2d0e2268080212148782914081305843b8e45605ac3413b4f7ab84411a0c08bae8868a0610abc1a7ce0222407e2d5739fd11338c5dbe2c996252dada3ad7d365924df52397b030346fd94c2b81f17c4b8214afc58ed8db6b4a0df0fcf392f1709f35e72216f7ae0bac5cc9062268080212144590298a3661bf7b2fc18d27d4fe4f719b9012031a0c08bae8868a06108b8d85c80322409be0efdaf46f3430abb665d06f866cee1e64f6b1539bd12b1e84e629e2e091fa8878d1096da097481fe9e8bfe05ff6df8e6546a8b8e1b379d738d927980302062268080212142a9b634c043d4b5bad332d817c12e0304b5506441a0c08bae8868a0610d68a8086032240a556147b0e60198cc7aafc7d04c6a2608c70d0ecbf73cc33788ee9cd860bad6a9438c45240d88ef0ed8e1ff6eb5433376c3ef64bda7d2b15b9a25cc40456b802226808021214d4f97a83d478ebf6c6f8c4696c3abbe7dec376391a0c08bae8868a0610dcf2f7c70222404fa7f795aa4fda1bbea6592308cb8d9325cd85514ba7ad7856373aff0d803d1dadaf9853c129b3ea8c3a95bf2be59530eda55361b2bdb018520be8ac4aa1660a226808021214907cbfbd71e38be64f6eec36f1c686008b9d783a1a0c08bae8868a0610819e90e1022240572707c4ee24e79798088532a305ccd88c36921d6f8681ccf1487ce39316645e2c6c66912cd445f321beba4393b09061852a05fe21c238336b9740c0df3683062268080212149eb7be73090b107fb4793ae3a224671881788be81a0c08bae8868a06109cf2c4d40222409f55a7e88e9e85239ac4501d34c9fcdf796a58b96b896c1235bfdf3f6c6d9698cbb50cebd02bb9b706289f13844f9e38ea2efa1190206465638045ae9444df092268080212144e33201858972a67b2a7274e7d96c4a0424c3b081a0c08bae8868a0610ccd3b4cb022240f08c77c3a04d842502167aea1817f07177aa3aae6d1841e38838255f5c39b66da2be915f553f4f7473f444ce673f67f8aa11beeeb60b7bd9dd14b7198d82bc0d226808021214c7ca5814808d4edd64be69209d8edd18bf1bdfa41a0c08bae8868a0610e9ccaec6022240f705b9b4adb7c77f7e9287c94f6a20d7b459abf4a0c8e3cad303df7dc97c49c9cb31d928b991610c6d1137945e6e4072d7787b3f70a96d1ce0da49d47ee71f0522680802121442c3279ebfbce3bb488a428d85be60882b92ba321a0c08bae8868a0610d791b1c20222400ccaff3d9e6c8c1ecd278eda616047ccec20c3bfe27bf3f19052c2ab24da7fdc7af3066c3323bc3d9c0be30476018ebcdf77c923438d4479373f185a60d1fc072268080212143742a042272ff9db066cb4b320456664dd1231951a0c08bae8868a061085f4cccf022240eb8d99b7b788b88903dff602ad10580c4866c22db40558979b593ecc572be60c2ff945cc69261c01ad180b547c465465c9facff00e1e92498ba0b58660d30105226808021214dc9920dac6523e4d79531dd19cb85281b1d34e1c1a0c08bae8868a0610e8a0a6b4022240f0493b0bf80116e0b7388e477db53ed382021c2f7aedf60e776775310438422a52250e6ecccf2c9197f1e27ea98e61b95e58625f3dc48972738baac332023309226808021214f4b2ddc332cfaab288ecb4f969620464c052e5591a0c08bae8868a0610a1c7838b022240d4b51e3d0282214a72f74d616214f7ac93dfbfa9da4459faf25432f04434a05a0ad16b76608527f8b336338a94ccd18e2d600a554da750dff4dc16d8cff5ee0222680802121465ffe140e1d953f5ea34f53562e6006c175818e71a0c08bae8868a0610dde8dfaf022240331b3e2b98e1d504bc9c44089a7c5a63ddf1a102f259b2e9daac5b298c2ea79d62a570678d0b5bd774afea541217c9f3091ce89022e855e421ad9c0f65d61f0a22670802121487fbc614de1f6906dd893b702f96eb835ea0ee2b1a0b08bbe8868a0610d380f61c22403a4f5fcf22508cd54c50b27397e58fc2c7612a44e29a2dddf23579e672576bed7c4b7f3393b5f323ae645eb216f756cc9496372d1e2797f5c2ed6d57ad967b082268080212141029adc2b1bb7e1c761bd96f4f7099562331b6151a0c08bae8868a0610b28ce2e3022240dea9f2d674fb4e189d770bc5a67d3f6c669cbb23a53a36b2e51176a0b5d71a573f70cda81881c2f0e0543ba35e048c19675c79a106c10fe84faa67c049ad75092268080212149f3060ce5699964938764f4ebebfb11cc629d61b1a0c08bae8868a061094bb9bc8022240ceec364df6e071bc6722d2fd476c381d5517701b90cec213e7744599182f9f5a3f2802be6b62757f67874919ce761e14922a2a9cb81a14021fb0310b9ba864002268080212149915c5583996c04499590284f78b4f6913b4f2021a0c08bae8868a06109de6a6bc0222406e90ab221c1c3f52b6da3abf8567297fbccb6a40986890db4379347bc694e57767158ef83bfd2c26f98b944113b60b10062ed9375ec6ef1b971d6f1ab64a0009226808021214a21bf87042cb3bbb6400790b6ec71375d7bc37ce1a0c08bae8868a061097e7ba95022240b58d44a26fb845877761ee231e54696dca9bfeda7ce6e7e646c0d0cf1bedc17324f5c4597f09236d63521492cc8c36977344e2c72e2e0dcfe5a3473510fd600a2268080212146783a52c25dfb206291b7bd668574bf62c1526751a0c08bae8868a0610aeedfaac02224021a9224aaed8d82090dfb029eb8491122a3cee7579b4d8328626888f049cc12e350b9901564f2c324324ab2a07d6125406262e4bcdb08fb62fcb1a0e05e5780e226808021214f5af08325aeffe986842166cb982236417a1e7a31a0c08bae8868a0610cdace9a4032240445ad751e5afe418e133979ae0d77fc03e7d84f773cef2adad69a20bf4b5bb7da7f8c707213eaf1b7bc97f324834c3c61f1a5c005a86646ad07d8529a61aed05226808021214c179351b3455cc9bb1fbc2cab43bc90818fe779b1a0c08bae8868a06108486bff70122409246068013cad46b4a073fb5ccb34a53c985838eeb7438f85c76795bbac886a9b410b7bb824a48e3facffa961fb823e3b4a272e3ea33e7bf7cf377102dad230d226808021214afb3b8fda29d48f49292e49527fbe670276926a91a0c08bae8868a0610f292d7df022240d05cc6913c181763d1c58d0001ff1815fa2ecd7634578ecaaf120b81cb0f9f4d49ce9e57a4a523d719f36cbb4915a4f58bd73e76c4bc10f5074719a88089300022680802121451545213afc9b334a4c6f2f1b37bd2dae792836c1a0c08bae8868a0610e7b5c18f0222400f1bfdf8c84d6564e6981cd34b74b73b9c7147e1da50b30186f02e6fd7ca5d22f640c3757ede1710521cfd0d32aa76400fc292004de89158d0563f6df3c2cc0e2268080212144493712e940236bac4d6fb57a6b0dcf36156b4a11a0c08bae8868a0610c8d5f786022240bb3952764348b2f2991494d8be8fab6cfa7f743b8ef1ac22e1815860de3bb1eaa6c7df2cde25645c72fe8033452d6e884464ab8f379062fce1622b58e962cf032268080212143996d8e42a2f312f97e520420f49ecd2e177b4331a0c08bae8868a0610d0e7c5f6012240cd244f1a881c9cebfeaf75b9ea2ddbe2aec9e1122f8ca376def330c319c134b37577928b973ab8fa57d06cf1d429a6c592e7d0d4f117e747ec2ae7328b8019052268080212147e597d7b5fc228c72269a0b4205608807674817b1a0c08bae8868a0610d5c6e8fe012240a4a012915638ad59d07e3de5fc45bf1264264fc269df37fec2e55f0d8cf1a91d9420251adbe6f6768bb16aa0ea9a8f5360e5a4abcdd0f248ce2707e66dc60f02226808021214ad7393d584169edaaf5e69041357a0c0a077d6b61a0c08bae8868a061094f6b7c0022240f3a2826ad284b0e942bb63132be8373401ccd0e7a22142148dafa1c51466a6e53cb8660f15b7db5a3e274eb730ba88555cb0c7b95f07468feac17babcf9c7e09226808021214d4eac4ee579ff7095f273a8edf77d693c3a6ab4f1a0c08bae8868a0610c0c6948c02224020091059f2caaa404004b32f134a9f907e944a874d93901f5a806c975692121d0d2a6adfb5b82bbd2c2929a45134e4649ea0c5f19b4c9e6823be9fac58eda00c226808021214ead4cede3af7dd99b8c3cf0d812fb098fc230c7b1a0c08bae8868a0610deafb79f022240776d4f0d4598c225a1bec84531b0e1d70623f604a6bfd5eaaedf3e90e71068b5bc695462810e37dc2b4fe7dc63d2d6e849a2b6b0d46f1bb1b41ba1e1011af50a2268080212140cfb220615ab92eff7bf358ad8cc5010a455062c1a0c08bae8868a0610bfa9cfff0222402de46acaab37be8e7a8c66f03eeb5318bed9753e35b0df050910d70766b5fa9395bea3e2efc095269b758d44eda85151743c2a8747ed436c524fbe64b6a4570e1294060a4a0a143287c60f1b7ed6f8eec191666c13011ef7b5295712220a202e54373b2f90a7372b4ea3d638aebd3709c1c145d8d3bab8ad00ce6b41e4813218998eda342099d6b1aeffffffffff010a440a14c563eecb2f99e06a902c920a867d8959cef1ae9b12220a209b94e878bb1f642a7f107313ce2654001b6dbbca042db3042d26b928e81debb518fe99ec0d20fe99ec0d0a440a148a1ea7775fb5d40d69fa0e6eef1372ace2ff774712220a2099edc85d910607b8c16bbb9c6211d29e204602bcfef923cc8f8117582ee7f12018f3d1c50920f3d1c5090a440a140af650951dce5d8fb2d6103bc85d17cb16f5a08c12220a20bfeef9d6c8f665ca7c23d7f3f8a341d22bcd4aab49e6862598f1c217781244f118eeb5a10920eeb5a1090a440a14ba355b5d42c2ff6fb34d9d0be5955dd7f44c7bcc12220a20c638282d28ec15103967728b9dc4a15e6045798e819af19b0451c033f52f33d31893fdd7082093fdd7080a440a1451244da65098e41b63fc0911647d8db055cb727812220a2043b443217b5cf45e64752049c0899d9b7f68ce7108f777e5dc32518fc0d700f618a0bab70820a0bab7080a440a141d55d18575f55f0986f7e04156252cda1c8c6b7c12220a205df84ac74718d845fa22541254345fd0eb5e6ca30dc818271afba0ec5e8c48b718b8d1ae0820b8d1ae080a440a14d1d363c627fb609a10906b9752a6410475d186f712220a20589ca67706fdb6c8002882bd700a108c1c17f9b8199376b675f90e18e0c4676b18b6aca30820b6aca3080a440a148737b9e89bb479057e8f0273bc76033d595aacb812220a20a79b11af9f4aae814f1c6cc9030e260b1f87e151ce73a5f7440bcf8e4db2298e18e29af20720e29af2070a440a146bf55b20424140b3e2c084c1d946ade4b8d68ccf12220a200022b99b102ea12e0a83ecfd31e99edead3ec9bd060285eec6eb97bc8a50e6f51885b8a7072085b8a707124a0a143287c60f1b7ed6f8eec191666c13011ef7b5295712220a202e54373b2f90a7372b4ea3d638aebd3709c1c145d8d3bab8ad00ce6b41e4813218998eda342099d6b1aeffffffffff011880b8a886011a0510baf6cd052294060a4a0a143287c60f1b7ed6f8eec191666c13011ef7b5295712220a202e54373b2f90a7372b4ea3d638aebd3709c1c145d8d3bab8ad00ce6b41e4813218998eda342099d6b1aeffffffffff010a440a14c563eecb2f99e06a902c920a867d8959cef1ae9b12220a209b94e878bb1f642a7f107313ce2654001b6dbbca042db3042d26b928e81debb518fe99ec0d20fe99ec0d0a440a148a1ea7775fb5d40d69fa0e6eef1372ace2ff774712220a2099edc85d910607b8c16bbb9c6211d29e204602bcfef923cc8f8117582ee7f12018f3d1c50920f3d1c5090a440a140af650951dce5d8fb2d6103bc85d17cb16f5a08c12220a20bfeef9d6c8f665ca7c23d7f3f8a341d22bcd4aab49e6862598f1c217781244f118eeb5a10920eeb5a1090a440a14ba355b5d42c2ff6fb34d9d0be5955dd7f44c7bcc12220a20c638282d28ec15103967728b9dc4a15e6045798e819af19b0451c033f52f33d31893fdd7082093fdd7080a440a1451244da65098e41b63fc0911647d8db055cb727812220a2043b443217b5cf45e64752049c0899d9b7f68ce7108f777e5dc32518fc0d700f618a0bab70820a0bab7080a440a141d55d18575f55f0986f7e04156252cda1c8c6b7c12220a205df84ac74718d845fa22541254345fd0eb5e6ca30dc818271afba0ec5e8c48b718b8d1ae0820b8d1ae080a440a14d1d363c627fb609a10906b9752a6410475d186f712220a20589ca67706fdb6c8002882bd700a108c1c17f9b8199376b675f90e18e0c4676b18b6aca30820b6aca3080a440a148737b9e89bb479057e8f0273bc76033d595aacb812220a20a79b11af9f4aae814f1c6cc9030e260b1f87e151ce73a5f7440bcf8e4db2298e18e29af20720e29af2070a440a146bf55b20424140b3e2c084c1d946ade4b8d68ccf12220a200022b99b102ea12e0a83ecfd31e99edead3ec9bd060285eec6eb97bc8a50e6f51885b8a7072085b8a707124a0a143287c60f1b7ed6f8eec191666c13011ef7b5295712220a202e54373b2f90a7372b4ea3d638aebd3709c1c145d8d3bab8ad00ce6b41e4813218998eda342099d6b1aeffffffffff011880b8a88601", "hex")
        let result = await clientManager.updateClient(chainName, headerBz)
        let txResult = await result.wait();
        //console.log(txResult)
    })

    // it("test verifyPacketCommitment", async function () {
    //     // create light client
    //     let clientState = {
    //         chainId: "chain-f6C1TF",
    //         trustLevel: {
    //             numerator: 1,
    //             denominator: 3
    //         },
    //         trustingPeriod: 10 * 24 * 60 * 60,
    //         unbondingPeriod: 1814400,
    //         maxClockDrift: 10,
    //         latestHeight: {
    //             revisionNumber: 0,
    //             revisionHeight: 3893
    //         },
    //         merklePrefix: {
    //             keyPrefix: Buffer.from("74696263", "hex"),
    //         },
    //         timeDelay: 0,
    //     };

    //     let consensusState = {
    //         timestamp: {
    //             secs: 1631517854,
    //             nanos: 5829,
    //         },
    //         root: Buffer.from("99f2fe6e2cb20c8e9bfaa8e490a3967efe44a2a9f4b505d21fec0c08090370f1", "hex"),
    //         nextValidatorsHash: Buffer.from("B1fwvGc/jfJtYdPnS7YYGsnfiMCaEQDG+t4mRgS0xHg=", "base64")
    //     }

    //     let proofHeight: any = {
    //         revision_number: 0,
    //         revision_height: 3893
    //     };

    //     let proof: any = Buffer.from("0a410a3f0a27636f6d6d69746d656e74732f697269736875622f6574686572756d2f73657175656e6365732f3112074d5956414c55451a0b0801180120012a030002020a350a330a0474696263122075416887166fb369184fdac1bed43dc01c3e1da9693b71f2493e1ecd049b12ec1a090801180120012a0100", "hex");

    //     let value: any = Buffer.from("4d5956414c5545", "hex")

    //     await createClient("chainName", tendermint.address, clientState, consensusState)
    //     await tendermint.verifyPacketCommitment(
    //         proofHeight,
    //         proof,
    //         "irishub",
    //         "etherum",
    //         1,
    //         value
    //     )
    // })

    const deployContract = async function () {
        accounts = await ethers.getSigners();
        const msrFactory = await ethers.getContractFactory('ClientManager', {
            signer: accounts[0],
            libraries: {},
        })
        clientManager = (await msrFactory.deploy("etherum")) as ClientManager

        let originChainName = await clientManager.getChainName();
        expect(originChainName).to.eq("etherum")

        const ClientStateCodec = await ethers.getContractFactory('ClientStateCodec')
        const clientStateCodec = await ClientStateCodec.deploy();
        await clientStateCodec.deployed();

        const ConsensusStateCodec = await ethers.getContractFactory('ConsensusStateCodec')
        const consensusStateCodec = await ConsensusStateCodec.deploy();
        await consensusStateCodec.deployed();

        const HeaderCodec = await ethers.getContractFactory('HeaderCodec')
        const headerCodec = await HeaderCodec.deploy();
        await headerCodec.deployed();

        const ProofCodec = await ethers.getContractFactory('ProofCodec')
        const proofCodec = await ProofCodec.deploy();
        await proofCodec.deployed();

        const Verifier = await ethers.getContractFactory('Verifier', {
            signer: accounts[0],
            libraries: {
                ProofCodec: proofCodec.address,
            },
        })
        const verifierLib = await Verifier.deploy();
        await verifierLib.deployed();

        const tmFactory = await ethers.getContractFactory('Tendermint', {
            signer: accounts[0],
            libraries: {
                ClientStateCodec: clientStateCodec.address,
                ConsensusStateCodec: consensusStateCodec.address,
                HeaderCodec: headerCodec.address,
                Verifier: verifierLib.address
            },
        })
        tendermint = (await tmFactory.deploy(clientManager.address)) as Tendermint
    }

    const createClient = async function (chainName: string, lightClientAddress: any, clientState: any, consensusState: any) {
        let clientStateBuf = client.ClientState.encode(clientState).finish();
        let consensusStateBuf = client.ConsensusState.encode(consensusState).finish();
        await clientManager.createClient(chainName, lightClientAddress, clientStateBuf, consensusStateBuf)
    }
})